<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>node总结 | 干蛋杂货铺</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="记录学到的知识，活到老，学到老">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.e853742c.css" as="style"><link rel="preload" href="/assets/js/app.d1d4f660.js" as="script"><link rel="preload" href="/assets/js/3.818b3300.js" as="script"><link rel="preload" href="/assets/js/1.e4e7e8b1.js" as="script"><link rel="preload" href="/assets/js/67.eb60e33e.js" as="script"><link rel="prefetch" href="/assets/js/10.1e7f57ba.js"><link rel="prefetch" href="/assets/js/11.b10521af.js"><link rel="prefetch" href="/assets/js/12.22c6fa66.js"><link rel="prefetch" href="/assets/js/13.334c6fe7.js"><link rel="prefetch" href="/assets/js/14.1f8405ec.js"><link rel="prefetch" href="/assets/js/15.f5bf1fee.js"><link rel="prefetch" href="/assets/js/16.c39d8f35.js"><link rel="prefetch" href="/assets/js/17.e3fe2a2f.js"><link rel="prefetch" href="/assets/js/18.14e97fe6.js"><link rel="prefetch" href="/assets/js/19.6fb3447a.js"><link rel="prefetch" href="/assets/js/20.cc8a7b41.js"><link rel="prefetch" href="/assets/js/21.b8f040d0.js"><link rel="prefetch" href="/assets/js/22.d5c1a0d0.js"><link rel="prefetch" href="/assets/js/23.17599266.js"><link rel="prefetch" href="/assets/js/24.6b754b7a.js"><link rel="prefetch" href="/assets/js/25.d683ff79.js"><link rel="prefetch" href="/assets/js/26.bb327cea.js"><link rel="prefetch" href="/assets/js/27.e4fbba4d.js"><link rel="prefetch" href="/assets/js/28.b4278926.js"><link rel="prefetch" href="/assets/js/29.b9bf578f.js"><link rel="prefetch" href="/assets/js/30.7d032919.js"><link rel="prefetch" href="/assets/js/31.0811d0ad.js"><link rel="prefetch" href="/assets/js/32.a03f156e.js"><link rel="prefetch" href="/assets/js/33.c8bfc1a2.js"><link rel="prefetch" href="/assets/js/34.17255310.js"><link rel="prefetch" href="/assets/js/35.7522c0e3.js"><link rel="prefetch" href="/assets/js/36.f24ac70d.js"><link rel="prefetch" href="/assets/js/37.38a6e30f.js"><link rel="prefetch" href="/assets/js/38.479849ac.js"><link rel="prefetch" href="/assets/js/39.dd0407c8.js"><link rel="prefetch" href="/assets/js/4.de9e9d2f.js"><link rel="prefetch" href="/assets/js/40.cec0ec73.js"><link rel="prefetch" href="/assets/js/41.d770ba9f.js"><link rel="prefetch" href="/assets/js/42.4667a7f7.js"><link rel="prefetch" href="/assets/js/43.f66b9d80.js"><link rel="prefetch" href="/assets/js/44.d2b22767.js"><link rel="prefetch" href="/assets/js/45.82c7005d.js"><link rel="prefetch" href="/assets/js/46.c5bb8351.js"><link rel="prefetch" href="/assets/js/47.5664531f.js"><link rel="prefetch" href="/assets/js/48.28157651.js"><link rel="prefetch" href="/assets/js/49.95018c1b.js"><link rel="prefetch" href="/assets/js/5.71fc1bc4.js"><link rel="prefetch" href="/assets/js/50.546ea602.js"><link rel="prefetch" href="/assets/js/51.3bb02297.js"><link rel="prefetch" href="/assets/js/52.4959f699.js"><link rel="prefetch" href="/assets/js/53.0df6ba01.js"><link rel="prefetch" href="/assets/js/54.8f8cbbcb.js"><link rel="prefetch" href="/assets/js/55.fffea17d.js"><link rel="prefetch" href="/assets/js/56.6d943789.js"><link rel="prefetch" href="/assets/js/57.3cedac58.js"><link rel="prefetch" href="/assets/js/58.da03a8a8.js"><link rel="prefetch" href="/assets/js/59.e845ddf7.js"><link rel="prefetch" href="/assets/js/6.0ea5bad9.js"><link rel="prefetch" href="/assets/js/60.910b2867.js"><link rel="prefetch" href="/assets/js/61.1bfa6e2e.js"><link rel="prefetch" href="/assets/js/62.a1b0fc85.js"><link rel="prefetch" href="/assets/js/63.0048c940.js"><link rel="prefetch" href="/assets/js/64.5ad3d0d0.js"><link rel="prefetch" href="/assets/js/65.83e8aa2c.js"><link rel="prefetch" href="/assets/js/66.e1ace55b.js"><link rel="prefetch" href="/assets/js/68.0cf823b6.js"><link rel="prefetch" href="/assets/js/69.cbe18845.js"><link rel="prefetch" href="/assets/js/7.94ccf788.js"><link rel="prefetch" href="/assets/js/70.893ae436.js"><link rel="prefetch" href="/assets/js/71.b2109ebb.js"><link rel="prefetch" href="/assets/js/72.9a40bf47.js"><link rel="prefetch" href="/assets/js/73.87fe3006.js"><link rel="prefetch" href="/assets/js/74.e2c991b6.js"><link rel="prefetch" href="/assets/js/75.aef04f30.js"><link rel="prefetch" href="/assets/js/76.6acd676a.js"><link rel="prefetch" href="/assets/js/77.8a50c05d.js"><link rel="prefetch" href="/assets/js/78.042d1624.js"><link rel="prefetch" href="/assets/js/79.c467d9c6.js"><link rel="prefetch" href="/assets/js/8.cbd6fbfd.js"><link rel="prefetch" href="/assets/js/80.332cd611.js"><link rel="prefetch" href="/assets/js/81.1bad2e64.js"><link rel="prefetch" href="/assets/js/82.2fa77547.js"><link rel="prefetch" href="/assets/js/83.25d50588.js"><link rel="prefetch" href="/assets/js/84.f8c1438f.js"><link rel="prefetch" href="/assets/js/85.9ba6a769.js"><link rel="prefetch" href="/assets/js/86.45914ded.js"><link rel="prefetch" href="/assets/js/87.9d9adf18.js"><link rel="prefetch" href="/assets/js/88.75e1ca4d.js"><link rel="prefetch" href="/assets/js/89.f831cd81.js"><link rel="prefetch" href="/assets/js/9.ce3ec1bf.js"><link rel="prefetch" href="/assets/js/90.b8b44210.js"><link rel="prefetch" href="/assets/js/91.37bdd286.js"><link rel="prefetch" href="/assets/js/92.6b7b14f8.js"><link rel="prefetch" href="/assets/js/93.c2508303.js"><link rel="prefetch" href="/assets/js/94.bcda9a91.js"><link rel="prefetch" href="/assets/js/95.eb1572da.js"><link rel="prefetch" href="/assets/js/96.4c590912.js"><link rel="prefetch" href="/assets/js/97.ac608072.js"><link rel="prefetch" href="/assets/js/98.47f3bc15.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e853742c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>干蛋杂货铺</h3> <p class="description" data-v-59e6cb88>记录学到的知识，活到老，学到老</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">干蛋杂货铺</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-date"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/算法与数据结构/" class="nav-link"><i class="undefined"></i>
  算法与数据结构
</a></li><li class="dropdown-item"><!----> <a href="/categories/个人思考/" class="nav-link"><i class="undefined"></i>
  个人思考
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端基础/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/categories/杂项/" class="nav-link"><i class="undefined"></i>
  杂项
</a></li><li class="dropdown-item"><!----> <a href="/categories/后端相关/" class="nav-link"><i class="undefined"></i>
  后端相关
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机基础/" class="nav-link"><i class="undefined"></i>
  计算机基础
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="./avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>83</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>79</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-date"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/算法与数据结构/" class="nav-link"><i class="undefined"></i>
  算法与数据结构
</a></li><li class="dropdown-item"><!----> <a href="/categories/个人思考/" class="nav-link"><i class="undefined"></i>
  个人思考
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端基础/" class="nav-link"><i class="undefined"></i>
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/categories/杂项/" class="nav-link"><i class="undefined"></i>
  杂项
</a></li><li class="dropdown-item"><!----> <a href="/categories/后端相关/" class="nav-link"><i class="undefined"></i>
  后端相关
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机基础/" class="nav-link"><i class="undefined"></i>
  计算机基础
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>node总结</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">node总结</h1> <div data-v-8a445198><!----> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>8/12/2022</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>node</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="模块规范"><a href="#模块规范" class="header-anchor">#</a> 模块规范</h2> <ul><li>commonjs 自带的</li> <li>ES Module 在package.js中配置type: module可以开启</li></ul> <h2 id="自带模块"><a href="#自带模块" class="header-anchor">#</a> 自带模块</h2> <ul><li>http 模块创建服务</li></ul> <h3 id="createserver-创建服务-可以返回html页面或者json"><a href="#createserver-创建服务-可以返回html页面或者json" class="header-anchor">#</a> createServer 创建服务，可以返回html页面或者json</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">//req是请求参数</span>
		<span class="token comment">//res是要返回的东西, 就是一个可写流</span>
		res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'text/html;charset:utf-8;'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//必须有这个，不会一直等待</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">//创建成功后返回</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	
	<span class="token comment">//和上面一样的</span>
	<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	
	server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'9000'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="jsonp-接口"><a href="#jsonp-接口" class="header-anchor">#</a> jsonp，接口</h3> <blockquote><p>jsonp请求和ajax请求区别，jsonp在network中会出现到js栏，而ajax是xhr栏
jsonp 原理，动态创建script标签，绕过跨域限制，后端返回一个类似函数调用的字符串</p></blockquote> <h3 id="cors-解决跨域"><a href="#cors-解决跨域" class="header-anchor">#</a> CORS 解决跨域</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json;charset=utf-8'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'access-control-allow-origin'</span><span class="token operator">:</span> <span class="token string">'*'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="get-请求-可以作为客户端-也可以作为服务端。也就是中层-中间层"><a href="#get-请求-可以作为客户端-也可以作为服务端。也就是中层-中间层" class="header-anchor">#</a> get 请求，可以作为客户端，也可以作为服务端。也就是中层，中间层</h3> <blockquote><p>大公司把nodejs作为中间层转发，中间件，作为集群，网关，聚合不同网站的数据
异步编程思想之回调函数</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//如果是http，可以直接这样</span>
https<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>reqURL<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        data <span class="token operator">+=</span> chunk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//传输中</span>

    res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//传输完成，才可以拿到最终数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//如果要请求的是https的，要用https模块</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="post-请求-可以作为客户端-也可以作为服务端"><a href="#post-请求-可以作为客户端-也可以作为服务端" class="header-anchor">#</a> post 请求，可以作为客户端，也可以作为服务端</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&quot;443&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/json&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> req <span class="token operator">=</span> https<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        data <span class="token operator">+=</span> chunk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

req<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="爬虫-直接抓取网页-如果页面是后端渲染出来的-就没有接口-只能用爬虫抓取网页分析"><a href="#爬虫-直接抓取网页-如果页面是后端渲染出来的-就没有接口-只能用爬虫抓取网页分析" class="header-anchor">#</a> 爬虫，直接抓取网页（如果页面是后端渲染出来的，就没有接口，只能用爬虫抓取网页分析）</h3> <blockquote><p>性能不如python专业爬虫的</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//使用cheerio 解析抓取的html，解析的像jquery一样</span>

    <span class="token keyword">let</span> $ <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">loda</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> $data <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>url 模块
包含parse和format方法，用来解析URL的参数，也可以你把对象生成url。redolve是拼接。（后面没有/, （加在后面或者直接替换最后这个），加/，直接在域名后面）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//新版</span>
<span class="token keyword">const</span> urlObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">'http://127.0.0.1:3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
urlObj<span class="token punctuation">.</span>pathname <span class="token comment">//是一样的</span>
urlObj<span class="token punctuation">.</span>searchParam <span class="token comment">//参数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>querystring 模块
把参数路径结构转化为参数对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> querystring <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> querystring<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'name=avb&amp;age=1000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: 'avb', age: 100 }</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> querystring<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'avb'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//转化成字符串</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>escape/unescape(mysql,和querystring 都有)
转义替换，类似encodeUrlComponent，防止sql注入，XSS攻击</li></ul> <h2 id="内置模块之event模块"><a href="#内置模块之event模块" class="header-anchor">#</a> 内置模块之event模块</h2> <blockquote><p>订阅发布模式</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> EventEmit <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;event&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//每次请求需要重新创建，移到外面会导致多次监听</span>

event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;play&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

event<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;play&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="fs内置模块"><a href="#fs内置模块" class="header-anchor">#</a> fs内置模块</h2> <h3 id="创建文件夹"><a href="#创建文件夹" class="header-anchor">#</a> 创建文件夹</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="修改文件夹名"><a href="#修改文件夹名" class="header-anchor">#</a> 修改文件夹名</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./avatar2&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="删除目录"><a href="#删除目录" class="header-anchor">#</a> 删除目录</h3> <blockquote><p>只能删空目录，有文件的话，需要先删除文件删完</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="读取文件夹目录"><a href="#读取文件夹目录" class="header-anchor">#</a> 读取文件夹目录</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">readDir</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="创建文件"><a href="#创建文件" class="header-anchor">#</a> 创建文件</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//如果有文件，会覆盖内容</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar/a.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="追加文件内容"><a href="#追加文件内容" class="header-anchor">#</a> 追加文件内容</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar/a.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello2&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="读取文件"><a href="#读取文件" class="header-anchor">#</a> 读取文件</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//error-first 风格，错误在前</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar/a.txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment">//data 会是buffer对象</span>
	data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token comment">//按utf8</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//这样指定字符集也可以</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar/a.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment">//data</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="删除文件"><a href="#删除文件" class="header-anchor">#</a> 删除文件</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar/a.txt&quot;</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="查看文件信息"><a href="#查看文件信息" class="header-anchor">#</a> 查看文件信息</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">&quot;./avatar/a.txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="文件是否存在"><a href="#文件是否存在" class="header-anchor">#</a> 文件是否存在</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="使用同步方法"><a href="#使用同步方法" class="header-anchor">#</a> 使用同步方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span>readFileSync <span class="token comment">//以上方法都可以加上sync变成同步，但是需要用try catch包裹，不然报错就会程序退出。会影响其他人使用，卡住</span>
<span class="token comment">//同步方法谨慎使用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="基于promise同步写法"><a href="#基于promise同步写法" class="header-anchor">#</a> 基于promise同步写法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>promises<span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">readDir</span><span class="token punctuation">(</span><span class="token string">'./avatar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="常见错误码"><a href="#常见错误码" class="header-anchor">#</a> 常见错误码</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">ENOENT</span><span class="token operator">:</span> <span class="token string">&quot;ERROR NO ENTRY&quot;</span> <span class="token comment">//找不到文件或目录</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="stream-流模块"><a href="#stream-流模块" class="header-anchor">#</a> stream 流模块</h2> <blockquote><p>读取大文件时，使用流模块，占用内存比较小</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot;sample.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&quot;sample.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//写流</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;1111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ws<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="pipe-高性能复制文件的方法"><a href="#pipe-高性能复制文件的方法" class="header-anchor">#</a> pipe 高性能复制文件的方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>readStream<span class="token punctuation">.</span><span class="token function">pip</span><span class="token punctuation">(</span>writeStream<span class="token punctuation">)</span> <span class="token comment">//自动write end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="zlib-模块"><a href="#zlib-模块" class="header-anchor">#</a> zlib 模块</h2> <blockquote><p>压缩文件，加快传输速度</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> zlib <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;zlib&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> gzip <span class="token operator">=</span> zlib<span class="token punctuation">.</span><span class="token function">createGzip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;Content-Encoding&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gzip&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

readStream<span class="token punctuation">.</span><span class="token function">pip</span><span class="token punctuation">(</span>gzip<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="crypto-模块"><a href="#crypto-模块" class="header-anchor">#</a> crypto 模块</h2> <blockquote><p>加密和哈希算法模块</p></blockquote> <ul><li>MD5算法，不可逆的算法，可以用作密码保存，文件完整性校验</li> <li>AES加密算法</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'crypto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> hash <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">&quot;md5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//还支持sha1, sha256</span>

hash<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

hash<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以传hex或者base64，两种形式</span>


<span class="token keyword">const</span> hash2 <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHmac</span><span class="token punctuation">(</span><span class="token string">'md5'</span><span class="token punctuation">,</span> <span class="token string">'secret-key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//操作和上面一样，但是有密钥，更安全，不容易被比对出来</span>

<span class="token comment">//对称加密算法</span>
<span class="token keyword">function</span> <span class="token function">encrypt</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> iv<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> dep <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createCipheriv</span><span class="token punctuation">(</span><span class="token string">&quot;aes-128-cbc&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> iv<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//128 所以key和iv都是16字节，16*8=128</span>

    <span class="token keyword">return</span> dep<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">&quot;binary&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> dep<span class="token punctuation">.</span><span class="token function">final</span><span class="token punctuation">(</span><span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">decrypt</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> iv<span class="token punctuation">,</span> crypted</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    crypted <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>crypted<span class="token punctuation">,</span> <span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">&quot;binary&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Buffer 是 nodejs 核心 API，它提供我们处理二进制数据流的功能</span>

    <span class="token keyword">let</span> dep <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createDecipheriv</span><span class="token punctuation">(</span><span class="token string">&quot;aes-128-cbc&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> iv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dep<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>crypted<span class="token punctuation">,</span> <span class="token string">&quot;binary&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;urf8&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> dep<span class="token punctuation">.</span><span class="token function">final</span><span class="token punctuation">(</span><span class="token string">&quot;utf8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="path-内置模块-处理linux和windows路径-不同系统-斜线不同"><a href="#path-内置模块-处理linux和windows路径-不同系统-斜线不同" class="header-anchor">#</a> path 内置模块，处理linux和windows路径，不同系统，斜线不同</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/static'</span><span class="token punctuation">,</span> <span class="token string">'/css/login.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//拼接路径</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="路由-url和资源的一个映射-可能是页面或者接口或者文件"><a href="#路由-url和资源的一个映射-可能是页面或者接口或者文件" class="header-anchor">#</a> 路由，url和资源的一个映射，可能是页面或者接口或者文件</h2> <blockquote><p>route 就放路由，页面
api 放接口</p></blockquote> <h2 id="静态服务路由"><a href="#静态服务路由" class="header-anchor">#</a> 静态服务路由</h2> <ul><li>返回的css文件，js文件，需要根据文件类型返回对应Content-Type,使用mime模块可以解决</li></ul> <h2 id="node全局变量"><a href="#node全局变量" class="header-anchor">#</a> node全局变量</h2> <ul><li>__dirname 当前路径</li></ul> <h2 id="express-框架"><a href="#express-框架" class="header-anchor">#</a> Express 框架</h2> <blockquote><p>快速，开放，极简的框架，由路由和中间件组成</p></blockquote> <ul><li>app = express() 函数，生成一个服务，类似http.createServer</li> <li>app.get, res.send 函数，自动end，会自动判断返回内容，生成对应Content-Type</li> <li>app.get的第三个参数，回调的next方法，就是中间件，如果next传参数，就是传error，下一个中间件的回调第一个参数就是error</li> <li>app.get的第二个参数可以传函数数组</li></ul> <h3 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h3> <ul><li>字符串，固定字符串</li> <li>字符串模式，带参数，支持动态匹配，类似正则。也可以直接写正则表达式作为url</li></ul> <h2 id="中间件"><a href="#中间件" class="header-anchor">#</a> 中间件</h2> <blockquote><p>以为把代码都放入回调函数中，回调函数会很臃肿，并且代码复用性不好，所以抽出中间件的概念，把处理函数分为多个中间件，这样更好理解，其它地方也能复用中间件。本质就是一个函数</p></blockquote> <ul><li>中间件之间如何通信，可以在res中上加属性值</li> <li>中间件三个参数，req，res，和next。如果中间没有next，就会挂起</li></ul> <h3 id="中间件类别"><a href="#中间件类别" class="header-anchor">#</a> 中间件类别</h3> <ul><li>应用级, 挂在app上面的都叫做应用级中间件</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>func1<span class="token punctuation">)</span> <span class="token comment">//全部，注意先后顺序，只管他后面的</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">,</span> func1<span class="token punctuation">)</span> <span class="token comment">//只响应/home</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//托管静态文件，直接就可以吧public文件夹里的静态资源直接访问了</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/static'</span><span class="token punctuation">,</span> express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//虚拟目录，访问static就等同于public</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>路由级
挂在路由对象上</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//配置解析post参数的中间件，这是响应x-www-form-urlencoded 格式</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//配置解析post参数的中间件，解析json格式参数</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//通过req.query获取参数</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//参数通过req.body获取参数，但是必须配置中间件</span>
<span class="token comment">//</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>错误处理</li> <li>内置</li> <li>第三方</li></ul> <h2 id="服务端渲染-ssr-和客户端渲染-bsr"><a href="#服务端渲染-ssr-和客户端渲染-bsr" class="header-anchor">#</a> 服务端渲染（SSR）和客户端渲染（BSR）</h2> <ul><li>客户端渲染，由前端组装页面，前后端分离，一定能找到提供数据的接口</li> <li>SSR的网站找不到数据的接口，在服务端就组装好了数据页面了
<ul><li>前端做好静态页面，模版，假数据，做好跳转</li> <li>后端取数据，删除模版的假数据，利用模版语法替换假数据</li></ul></li></ul> <blockquote><p>同构JS应用既能seo（服务端renderToString），又能快速交互（前端路由）。jsp只是前者。而且用三大框架开发，只操作数据，对比以前拿到数据后还要手动更新dom节点来说，方便了很多，代码量也少了不少，代码都是复用的，一端编写，两端执行</p></blockquote> <h3 id="老的jsp-php这种纯服务端渲染缺点"><a href="#老的jsp-php这种纯服务端渲染缺点" class="header-anchor">#</a> 老的JSP，PHP这种纯服务端渲染缺点</h3> <blockquote><p>解决办法，前后端分离（解决开发维护问题），动态静态分离（解决并发问题，减轻服务器压力，静态资源加载更快并且可以缓存加速，但是html是算静态还是动态呢？所以有了前后分层）</p></blockquote> <ul><li>耦合性不好，前端改个字，然后前后端都要重新部署</li> <li>开发协作困难，维护性不好，前后端代码都在一起</li> <li>性能不好，数据逻辑和视图逻辑每次请求后都要执行，动态生成html</li> <li>服务器成本高，由于Tomcat/Apache并发能力不如nginx，所以需要更多服务器</li></ul> <div class="custom-block tip"><p class="title"></p><ul><li>静态资源:图片、CSS、JS等公共资源，与特定用户无关的资源</li> <li>动态资源:应用逻辑、数据操作等与特定用户密切相关的资源</li></ul></div><h3 id="前后端分离"><a href="#前后端分离" class="header-anchor">#</a> 前后端分离</h3> <blockquote><p>前端后端都可以操作视图层，客户端驱动的话，不需要刷新页面，就可以通过ajax请求数据更新页面，还可以减轻服务器压力，所以把视图逻辑放到客户端</p></blockquote> <h3 id="spa应用的缺点"><a href="#spa应用的缺点" class="header-anchor">#</a> SPA应用的缺点</h3> <ul><li>依赖客户端的设备</li> <li>首屏性能问题，组件树渲染前，白屏问题，是因为组件渲染进程是同步阻塞的，影响了首屏性能问题，性能较差的设备，白屏很长时间
<ul><li>性能较差的设备，白屏很长时间</li> <li>网络较差，会加载很长时间</li></ul></li> <li>SEO问题</li> <li><a href="http://www.ayqy.net/blog/diference-between-ssr-and-jsp-php/" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="还有ssg-生成静态的网站-可以和ssr结合使用-next框架"><a href="#还有ssg-生成静态的网站-可以和ssr结合使用-next框架" class="header-anchor">#</a> 还有SSG 生成静态的网站，可以和SSR结合使用，NEXT框架</h3> <h3 id="服务端渲染-频繁更新的-首页用ssr-其余静态生成"><a href="#服务端渲染-频繁更新的-首页用ssr-其余静态生成" class="header-anchor">#</a> 服务端渲染（频繁更新的，首页用SSR，其余静态生成）</h3> <ul><li>首屏采用服务端渲染，解决白屏问题，确保首屏打开更快速，更稳定</li> <li>更成熟，基于前端组件化开发，现代生态，基于NODEJS同构方案成为最佳体验</li> <li>独立性，仍然是前后端分层</li> <li>EJS模版</li></ul> <h2 id="ejs模版渲染"><a href="#ejs模版渲染" class="header-anchor">#</a> EJS模版渲染</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&quot;views&quot;</span><span class="token punctuation">,</span> <span class="token string">'/views'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&quot;view engine&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ejs&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//router中使用res.render方法</span>
res<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'loign'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'111'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//重定向</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="支持直接渲染html"><a href="#支持直接渲染html" class="header-anchor">#</a> 支持直接渲染html</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&quot;view engine&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">engine</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;ejs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>renderFile<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="关系型数据库和非关系型数据库"><a href="#关系型数据库和非关系型数据库" class="header-anchor">#</a> 关系型数据库和非关系型数据库</h2> <ul><li>关系型，表表和有关联，删除的话会删除关联表的内容，外键关系等，用sql语句</li> <li>非关系型，no sql，not only sql，轻量高效，mongoDB, redis等，不用sql语句，使用BSON的方式。语句方法类似JS调用方法</li> <li>MongoDB一个集合里，字段可以不一致，数量也可以不同，很自由[但是要限制]</li></ul> <h2 id="mongodb"><a href="#mongodb" class="header-anchor">#</a> MongoDB</h2> <blockquote><p>轻量，查询很快，耗内存</p></blockquote> <h3 id="术语"><a href="#术语" class="header-anchor">#</a> 术语</h3> <ul><li>数据库</li> <li>集合/表</li> <li>文档/数据行</li> <li>域/字段</li> <li>索引</li> <li>主键</li></ul> <h3 id="命令"><a href="#命令" class="header-anchor">#</a> 命令</h3> <ul><li>use 创建数据库</li> <li>db 查看当前数据库</li> <li>show dbs 看全部</li> <li>db.createCollection 创建集合/表</li> <li>db.dropDatabase 删除数据库</li> <li>db.getCollectionNames 查询所有数据库</li> <li>db.[集合名].dorp() 删除集合</li> <li>db.[集合名].save({ name: &quot;张三&quot; }) 给集合插入数据</li> <li>db.[集合名].update() 更新</li> <li>db.[集合名].remove（{&quot;myAge&quot;: 100}) 删除myAge是100的数据，传空对象是删除所有</li> <li>db.[集合名].update({&quot;name&quot;: &quot;张三&quot;}, {$set: {&quot;age&quot;: 200}}) 更新, 不加$set，会是直接替换</li> <li>db.[集合名].update({&quot;name&quot;: &quot;张三&quot;}, {$inc: {&quot;age&quot;: 200}}) 更新, $inc 增加</li> <li>db.[集合名].update({&quot;name&quot;: &quot;张三&quot;}, {$inc: {&quot;age&quot;: -200}}) 更新, 减</li></ul> <h3 id="查询命令"><a href="#查询命令" class="header-anchor">#</a> 查询命令</h3> <ul><li>db.[集合名].find({&quot;user&quot;: &quot;az&quot;, &quot;password&quot;: 100}) 条件查询, 不传条件就查所有</li> <li>db.[集合名].find({&quot;age&quot;: {&quot;$gte&quot;: 100}}) 条件查询, 大于100</li> <li>db.[集合名].distinct(&quot;name&quot;) 查询某字段，去重复</li> <li>db.[集合名].find({&quot;name&quot;: /k/}) 模糊查询，用正则写法</li> <li>db.[集合名].find({}, {name: 1, age: 1, _id: 0}) 只查某个列/域，就不会返回_id</li> <li>db.[集合名].find({}).sort({age: -1}) 排序，1是升序, -1是倒序</li> <li>db.[集合名].find({}).skip(5).limt(5) 分页，查询5-10条</li> <li>db.[集合名].find({&quot;$or&quot;: [{age: {$gte: 100}}]}) 或</li> <li>db.[集合名].findOne() 查询第一条</li> <li>db.[集合名].find().count() 聚合查询，查询数量</li></ul> <h3 id="nodejs操作mongodb"><a href="#nodejs操作mongodb" class="header-anchor">#</a> nodejs操作mongoDb</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongoose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://127.0.0.1:27017/[数据库名字]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//连接完成后，用模型，可以限制类型去关联集合，操作</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongoose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> UserType <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">password</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> Number
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">Schema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userModal <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">useModel</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span>UserType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//userModal会对应user集合，并且会自动创建user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="restful-api-风格"><a href="#restful-api-风格" class="header-anchor">#</a> RestFul API 风格</h2> <blockquote><p>url中只包含资源名称，利用请求method来区分创建还是修改，请求参数模版，page，limit, offet, orderBy</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// api/getUserList GET 这种不是   api/user GET 这种是</span>
<span class="token comment">// api/updateUserList POST 这种不是   api/user PUT 这种是</span>
<span class="token comment">// api/AddUserList POST 这种不是   api/user POST 这种是</span>
<span class="token comment">// api/DelUserList POST 这种不是   api/user/:id DELETE 这种是</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="graphql"><a href="#graphql" class="header-anchor">#</a> graphql</h3> <p>根据前端，自己获取想要的字段</p> <h2 id="mvc架构"><a href="#mvc架构" class="header-anchor">#</a> MVC架构</h2> <blockquote><p>当业务变得很复杂时，不分层会很难理解和维护，以及复用</p></blockquote> <ul><li>把业务抽象为控制层</li> <li>目录结构就有了
<ul><li>routes 路由层</li> <li>controllers 路由里的回调函数，逻辑处理</li> <li>model 直接操作数据库</li> <li>services  调model的方法</li> <li>view 视图层</li></ul></li></ul> <h2 id="cookie和session"><a href="#cookie和session" class="header-anchor">#</a> cookie和session</h2> <ul><li>cookie 是存在客户端</li> <li>session 是存在服务端，与cookie结合，用cookie存储sessionId。解决cookie可能被盗用session服务端可以控制它失效</li></ul> <h3 id="session缺点"><a href="#session缺点" class="header-anchor">#</a> session缺点</h3> <ul><li>多个服务时，session复制的问题，可以通过专门弄个数据库存解决</li> <li>安全问题，浏览器会自动发送cookie。（请求伪造，CSRF）</li></ul> <h2 id="jwt解决cookie问题-json-web-token"><a href="#jwt解决cookie问题-json-web-token" class="header-anchor">#</a> JWT解决cookie问题 Json Web Token</h2> <ul><li>存在localStorage中，避免被串改</li> <li>可以避免CSRF，请求不会自动携带token</li></ul> <h2 id="常用工具"><a href="#常用工具" class="header-anchor">#</a> 常用工具</h2> <ul><li>nodemon 保存后自动重启node服务，不重新运行会不生效</li> <li>mime 模块，文件类型返回对应Content-Type</li> <li>FeHelper Chrome 插件</li> <li>Robomongo 可视化MongoDB工具</li> <li>mongoose nodejs链接mongodb</li> <li>express-session 生成session的模块</li> <li>connect-mongo</li> <li>jsonwebtoken 模块 JWT</li> <li>axios
<ul><li>拦截器，interceptors 可以在请求前，响应后执行某个方法，任何地方都会调用</li></ul></li> <li>multer 处理 multipart/form-data 格式，上传文件</li> <li>apidoc API文档生成工具，抓取注释色生成文档</li></ul> <h2 id="koa-和-express-的区别"><a href="#koa-和-express-的区别" class="header-anchor">#</a> Koa 和 Express 的区别</h2> <ul><li>Express 上手更容易，生态更丰富，基于connext中间件模型，是线性的，流水线般，如果一个中间件没有执行next，就会卡住</li> <li>Koa 不会提供内置中间件，更轻量</li> <li>Koa Context 参数</li> <li>Koa 洋葱模型</li> <li>Express 使用回调处理异步，Koa v1使用generator , v2使用async await</li> <li>next不同，Koa的next控制权会回到自己，是Promise的，Express 的next不是</li></ul> <h2 id="koa-中-回调参数不同"><a href="#koa-中-回调参数不同" class="header-anchor">#</a> Koa 中 回调参数不同</h2> <blockquote><p>(ctx, next)</p></blockquote> <h2 id="思考"><a href="#思考" class="header-anchor">#</a> 思考</h2> <ul><li>麻烦的东西封装成模块或者找第三方模块</li> <li>学指定新东西时，要专注于这个技术本身，其他不相关的尽量简单，这样才能高效。比如学node，涉及到样式啥的都按最简单的来。发散的东西可以先记录，下次补充</li> <li>自己学学SSR，手动试试</li> <li>随着代码越来越多，越来越复杂，要抽象分层</li></ul> <h2 id="mongodb查询"><a href="#mongodb查询" class="header-anchor">#</a> mongodb查询</h2> <h3 id="聚合查询"><a href="#聚合查询" class="header-anchor">#</a> 聚合查询</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>db
.getCollection<span class="token punctuation">(</span><span class="token string">&quot;web_errors_ftbqp8h1671594554364&quot;</span><span class="token punctuation">)</span>
.aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token variable">$match</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
			<span class="token string">&quot;create_time&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;<span class="token variable">$gt</span>&quot;</span>:ISODate<span class="token punctuation">(</span><span class="token string">&quot;2023-05-01T00:00:00.000Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;<span class="token variable">$lt</span>&quot;</span>:ISODate<span class="token punctuation">(</span><span class="token string">&quot;2023-05-04T00:00:00.000Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>, <span class="token punctuation">{</span>
		<span class="token variable">$group</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>_id: <span class="token string">&quot;<span class="token variable">$msg</span>&quot;</span>, counter: <span class="token punctuation">{</span><span class="token variable">$sum</span><span class="token builtin class-name">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span>, <span class="token punctuation">{</span>
		<span class="token variable">$sort</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;counter&quot;</span><span class="token builtin class-name">:</span> <span class="token parameter variable">-1</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	
    <span class="token punctuation">{</span>
        <span class="token variable">$group</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            _id: null, // 这样就是查询总次数
            counter: <span class="token punctuation">{</span><span class="token variable">$sum</span><span class="token builtin class-name">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="查询页面总次数"><a href="#查询页面总次数" class="header-anchor">#</a> 查询页面总次数</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>db
.getCollection<span class="token punctuation">(</span><span class="token string">&quot;web_pages_ftbqp8h1671594554364&quot;</span><span class="token punctuation">)</span>
.aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token variable">$match</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
			<span class="token string">&quot;create_time&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token string">&quot;<span class="token variable">$gt</span>&quot;</span>:ISODate<span class="token punctuation">(</span><span class="token string">&quot;2023-05-01T00:00:00.000Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;<span class="token variable">$lt</span>&quot;</span>:ISODate<span class="token punctuation">(</span><span class="token string">&quot;2023-05-04T00:00:00.000Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>, <span class="token punctuation">{</span>
		<span class="token variable">$group</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>_id: <span class="token string">&quot;_id&quot;</span>, counter: <span class="token punctuation">{</span><span class="token variable">$sum</span><span class="token builtin class-name">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="查询条数"><a href="#查询条数" class="header-anchor">#</a> 查询条数</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>const count <span class="token operator">=</span> await db.collection<span class="token punctuation">(</span><span class="token string">'collectionName'</span><span class="token punctuation">)</span>.countDocuments<span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
console.log<span class="token punctuation">(</span><span class="token string">'创建时间大于昨日的记录条数:'</span>, count<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#模块规范" class="sidebar-link reco-side-模块规范" data-v-b57cc07c>模块规范</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#自带模块" class="sidebar-link reco-side-自带模块" data-v-b57cc07c>自带模块</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#createserver-创建服务-可以返回html页面或者json" class="sidebar-link reco-side-createserver-创建服务-可以返回html页面或者json" data-v-b57cc07c>createServer 创建服务，可以返回html页面或者json</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#jsonp-接口" class="sidebar-link reco-side-jsonp-接口" data-v-b57cc07c>jsonp，接口</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#cors-解决跨域" class="sidebar-link reco-side-cors-解决跨域" data-v-b57cc07c>CORS 解决跨域</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#get-请求-可以作为客户端-也可以作为服务端。也就是中层-中间层" class="sidebar-link reco-side-get-请求-可以作为客户端-也可以作为服务端。也就是中层-中间层" data-v-b57cc07c>get 请求，可以作为客户端，也可以作为服务端。也就是中层，中间层</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#post-请求-可以作为客户端-也可以作为服务端" class="sidebar-link reco-side-post-请求-可以作为客户端-也可以作为服务端" data-v-b57cc07c>post 请求，可以作为客户端，也可以作为服务端</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#爬虫-直接抓取网页-如果页面是后端渲染出来的-就没有接口-只能用爬虫抓取网页分析" class="sidebar-link reco-side-爬虫-直接抓取网页-如果页面是后端渲染出来的-就没有接口-只能用爬虫抓取网页分析" data-v-b57cc07c>爬虫，直接抓取网页（如果页面是后端渲染出来的，就没有接口，只能用爬虫抓取网页分析）</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#内置模块之event模块" class="sidebar-link reco-side-内置模块之event模块" data-v-b57cc07c>内置模块之event模块</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#fs内置模块" class="sidebar-link reco-side-fs内置模块" data-v-b57cc07c>fs内置模块</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#创建文件夹" class="sidebar-link reco-side-创建文件夹" data-v-b57cc07c>创建文件夹</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#修改文件夹名" class="sidebar-link reco-side-修改文件夹名" data-v-b57cc07c>修改文件夹名</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#删除目录" class="sidebar-link reco-side-删除目录" data-v-b57cc07c>删除目录</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#读取文件夹目录" class="sidebar-link reco-side-读取文件夹目录" data-v-b57cc07c>读取文件夹目录</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#创建文件" class="sidebar-link reco-side-创建文件" data-v-b57cc07c>创建文件</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#追加文件内容" class="sidebar-link reco-side-追加文件内容" data-v-b57cc07c>追加文件内容</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#读取文件" class="sidebar-link reco-side-读取文件" data-v-b57cc07c>读取文件</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#删除文件" class="sidebar-link reco-side-删除文件" data-v-b57cc07c>删除文件</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#查看文件信息" class="sidebar-link reco-side-查看文件信息" data-v-b57cc07c>查看文件信息</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#文件是否存在" class="sidebar-link reco-side-文件是否存在" data-v-b57cc07c>文件是否存在</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#使用同步方法" class="sidebar-link reco-side-使用同步方法" data-v-b57cc07c>使用同步方法</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#基于promise同步写法" class="sidebar-link reco-side-基于promise同步写法" data-v-b57cc07c>基于promise同步写法</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#常见错误码" class="sidebar-link reco-side-常见错误码" data-v-b57cc07c>常见错误码</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#stream-流模块" class="sidebar-link reco-side-stream-流模块" data-v-b57cc07c>stream 流模块</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#pipe-高性能复制文件的方法" class="sidebar-link reco-side-pipe-高性能复制文件的方法" data-v-b57cc07c>pipe 高性能复制文件的方法</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#zlib-模块" class="sidebar-link reco-side-zlib-模块" data-v-b57cc07c>zlib 模块</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#crypto-模块" class="sidebar-link reco-side-crypto-模块" data-v-b57cc07c>crypto 模块</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#path-内置模块-处理linux和windows路径-不同系统-斜线不同" class="sidebar-link reco-side-path-内置模块-处理linux和windows路径-不同系统-斜线不同" data-v-b57cc07c>path 内置模块，处理linux和windows路径，不同系统，斜线不同</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#路由-url和资源的一个映射-可能是页面或者接口或者文件" class="sidebar-link reco-side-路由-url和资源的一个映射-可能是页面或者接口或者文件" data-v-b57cc07c>路由，url和资源的一个映射，可能是页面或者接口或者文件</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#静态服务路由" class="sidebar-link reco-side-静态服务路由" data-v-b57cc07c>静态服务路由</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#node全局变量" class="sidebar-link reco-side-node全局变量" data-v-b57cc07c>node全局变量</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#express-框架" class="sidebar-link reco-side-express-框架" data-v-b57cc07c>Express 框架</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#路由" class="sidebar-link reco-side-路由" data-v-b57cc07c>路由</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#中间件" class="sidebar-link reco-side-中间件" data-v-b57cc07c>中间件</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#中间件类别" class="sidebar-link reco-side-中间件类别" data-v-b57cc07c>中间件类别</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#服务端渲染-ssr-和客户端渲染-bsr" class="sidebar-link reco-side-服务端渲染-ssr-和客户端渲染-bsr" data-v-b57cc07c>服务端渲染（SSR）和客户端渲染（BSR）</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#老的jsp-php这种纯服务端渲染缺点" class="sidebar-link reco-side-老的jsp-php这种纯服务端渲染缺点" data-v-b57cc07c>老的JSP，PHP这种纯服务端渲染缺点</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#前后端分离" class="sidebar-link reco-side-前后端分离" data-v-b57cc07c>前后端分离</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#spa应用的缺点" class="sidebar-link reco-side-spa应用的缺点" data-v-b57cc07c>SPA应用的缺点</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#还有ssg-生成静态的网站-可以和ssr结合使用-next框架" class="sidebar-link reco-side-还有ssg-生成静态的网站-可以和ssr结合使用-next框架" data-v-b57cc07c>还有SSG 生成静态的网站，可以和SSR结合使用，NEXT框架</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#服务端渲染-频繁更新的-首页用ssr-其余静态生成" class="sidebar-link reco-side-服务端渲染-频繁更新的-首页用ssr-其余静态生成" data-v-b57cc07c>服务端渲染（频繁更新的，首页用SSR，其余静态生成）</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#ejs模版渲染" class="sidebar-link reco-side-ejs模版渲染" data-v-b57cc07c>EJS模版渲染</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#支持直接渲染html" class="sidebar-link reco-side-支持直接渲染html" data-v-b57cc07c>支持直接渲染html</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#关系型数据库和非关系型数据库" class="sidebar-link reco-side-关系型数据库和非关系型数据库" data-v-b57cc07c>关系型数据库和非关系型数据库</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#mongodb" class="sidebar-link reco-side-mongodb" data-v-b57cc07c>MongoDB</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#术语" class="sidebar-link reco-side-术语" data-v-b57cc07c>术语</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#命令" class="sidebar-link reco-side-命令" data-v-b57cc07c>命令</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#查询命令" class="sidebar-link reco-side-查询命令" data-v-b57cc07c>查询命令</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#nodejs操作mongodb" class="sidebar-link reco-side-nodejs操作mongodb" data-v-b57cc07c>nodejs操作mongoDb</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#restful-api-风格" class="sidebar-link reco-side-restful-api-风格" data-v-b57cc07c>RestFul API 风格</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#graphql" class="sidebar-link reco-side-graphql" data-v-b57cc07c>graphql</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#mvc架构" class="sidebar-link reco-side-mvc架构" data-v-b57cc07c>MVC架构</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#cookie和session" class="sidebar-link reco-side-cookie和session" data-v-b57cc07c>cookie和session</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#session缺点" class="sidebar-link reco-side-session缺点" data-v-b57cc07c>session缺点</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#jwt解决cookie问题-json-web-token" class="sidebar-link reco-side-jwt解决cookie问题-json-web-token" data-v-b57cc07c>JWT解决cookie问题 Json Web Token</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#常用工具" class="sidebar-link reco-side-常用工具" data-v-b57cc07c>常用工具</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#koa-和-express-的区别" class="sidebar-link reco-side-koa-和-express-的区别" data-v-b57cc07c>Koa 和 Express 的区别</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#koa-中-回调参数不同" class="sidebar-link reco-side-koa-中-回调参数不同" data-v-b57cc07c>Koa 中 回调参数不同</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#思考" class="sidebar-link reco-side-思考" data-v-b57cc07c>思考</a></li><li class="level-2" data-v-b57cc07c><a href="/other/node-learning.html#mongodb查询" class="sidebar-link reco-side-mongodb查询" data-v-b57cc07c>mongodb查询</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#聚合查询" class="sidebar-link reco-side-聚合查询" data-v-b57cc07c>聚合查询</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#查询页面总次数" class="sidebar-link reco-side-查询页面总次数" data-v-b57cc07c>查询页面总次数</a></li><li class="level-3" data-v-b57cc07c><a href="/other/node-learning.html#查询条数" class="sidebar-link reco-side-查询条数" data-v-b57cc07c>查询条数</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.d1d4f660.js" defer></script><script src="/assets/js/3.818b3300.js" defer></script><script src="/assets/js/1.e4e7e8b1.js" defer></script><script src="/assets/js/67.eb60e33e.js" defer></script>
  </body>
</html>
